<div class="container">
<h2> Contact - 1</h2>

<%= form_tag reason_for_stop_stops_path, :method => :get, :remote => true, :id => 'reason_for_stop_form',:class => "form-horizontal form-bordered"  do %>

<div class="form-group">
  <label class="col-md-3 control-label" for="" >Primary Reason for Stop: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
    <div class="col-md-6">
      <select class="form-control select_reason_for_stop" name="select_reason_for_stop">
         <option value="0">  Select</option>
      	<option value="1">  Traffic violation</option>
      	<option value="2">  Reasonable suspicion of criminal activity</option>
      	<option value="3">  Known to be on parole/probation/PRCS/mandatory supervision</option>
      	<option value="4">  Knowledge of outstanding arrest warrant/wanted person</option>
      	<option value="5">  Investigation to determine whether the person was truant</option>
      	<option value="6">  Consensual encounter resulting in search</option>
      	<option value="7">  Possible conduct warranting discipline under Education Code</option>
      	<option value="8">  Determine whether the student violated school policy</option>
      </select>
    </div>

 </div>


<div class="form-group">
      <label class="col-md-3 control-label" for="" > Reason for Stop Explanation/Narrative: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
      <div class="col-md-6">
        <textarea rows="4" cols="60" maxlength="250" class="form-control" name="reason_for_stop_explaination" placeholder="Enter text here..."> </textarea>
      </div>
</div>

<div class="form-group type_traffic_violation" style="display: none;">
  <label class="col-md-3 control-label" for="" > Type of Traffic violation: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
  <div id="traffic-error" class='hide error'>Please select an option</div>
   <div class="col-md-6">
    <select class="form-control" name="type_of_traffic_violation" class="type_of_traffic_violation">
        <option value="0">  Select</option>
        <option value="1">  Moving</option>
        <option value="2">  Equipment violation</option>
        <option value="3">  Non-moving violation, including registration violation</option>
    </select>
    </div>
</div>


<div class="form-group suspicion_cjis_offense_code_vioaltion" >

    <label class="col-md-3 control-label" for="" >Filter by Offense Type of Statute CD: </label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span>

  <div class="col-md-6">
    <input type="radio" class="penal_code" name="suspicion_cjis_offense_code_vioaltion" value="penal_code" /> Penal Code
    <input type="radio" name="suspicion_cjis_offense_code_vioaltion" value="health_safety" /> Health and Safety
    <input type="radio" name="suspicion_cjis_offense_code_vioaltion" value="welfare_institution" /> Welfare and Institution
    <input type="radio" name="suspicion_cjis_offense_code_vioaltion" value="vehicle_code" /> Vehicle Code
    <input type="radio" name="suspicion_cjis_offense_code_vioaltion" value="business_professional" /> Business and Professional
    <input type="radio" name="suspicion_cjis_offense_code_vioaltion" value="other" /> Other
  </div>
</div>

<div class="form-group suspicion_cjis_offense_code" >

    <label class="col-md-3 control-label" for="" >Filter by Offense Type of Statute CD: </label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span>

  <div class="col-md-6">
    <input type="radio" class="penal_code" name="suspicion_cjis_offense_code" value="penal_code" /> Penal Code
    <input type="radio" name="suspicion_cjis_offense_code" value="health_safety" /> Health and Safety
    <input type="radio" name="suspicion_cjis_offense_code" value="welfare_institution" /> Welfare and Institution
    <input type="radio" name="suspicion_cjis_offense_code" value="vehicle_code" /> Vehicle Code
    <input type="radio" name="suspicion_cjis_offense_code" value="business_professional" /> Business and Professional
    <input type="radio" name="suspicion_cjis_offense_code" value="other" /> Other
  </div>
</div>

<div class="form-group filter_by_code_section_violation">

    <label class="col-md-3 control-label" for="" >Filter by Code Section or Description: </label>  </span>

  <div class="col-md-6">
    <input type="radio" class="filter_by_code_violation" name="filter_by_violation" value="code_section" /> Code Section
    <input type="radio" name="filter_by_violation" value="description" /> Description
  </div>
</div>

<div class="form-group filter_by_code_section">

    <label class="col-md-3 control-label" for="" >Filter by Code Section or Description: </label>  </span>

  <div class="col-md-6">
    <input type="radio" class="filter_by_code_violation" name="filter_by" value="code_section" /> Code Section
    <input type="radio" name="filter_by" value="description" /> Description
  </div>
</div>

<div class="form-group suspicion_cjis_offense_code" >
  <label class="col-md-3 control-label" for="" > Suspicion CJIS Offense Code: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
   <div class="col-md-6">
    <select class="form-control" name="suspicion_cjis_offense_code">
      <option value="1">  Code Type (e.g. Vehicle Code, Penal Code, etc)</option>
      <option value="2">  Code Section (e.g. 290, 647, etc)</option>
      <option value="3">  Description (e.g. Drunk in public</option>
    </select>
    </div>
</div>
<div class="form-group suspicion_cjis_offense_code_vio" >
  <label class="col-md-3 control-label" for="" > Suspicion CJIS Offense Code: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
   <div class="col-md-6">
    <select class="form-control" name="violation_suspicion_cjis_offense_code">
        <option value="1">  Code Type (e.g. Vehicle Code, Penal Code, etc)</option>
        <option value="2">  Code Section (e.g. 290, 647, etc)</option>
        <option value="3">  Description (e.g. Drunk in public</option>
    </select>
    </div>
</div>
<div class="form-group suspicion_cjis_offense_code" >
  <label class="col-md-3 control-label" for="" > Reasonable Suspicion Sub Type: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
   <div class="col-md-6">
      <%= check_box_tag 'suspicion_sub_types[]', "1" %> Officer witnessed commission of a crime <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "2" %> Matched suspect description <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "3" %> Witness or victim identification of suspect at the scene <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "4" %> Carrying suspicious object <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "5" %> Actions indicative of casing a victim or location <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "6" %> Suspected of acting as a lookout <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "7" %> Actions indicative of a drug transaction <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "8" %> Actions indicative of engaging in a violent crime <br/>
      <%= check_box_tag 'suspicion_sub_types[]', "9" %> Other reasonable suspicion of a crime<br/>
    </div>
</div>

<div class="form-group education_code" style="display:none;">
  <label class="col-md-3 control-label" for="" > Education Code: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
   <div class="col-md-6">
     <input type="radio" name="education_code" value="1" /> 48900
     <input type="radio" name="education_code" value="2" /> 48900.2
     <input type="radio" name="education_code" value="3" /> 48900.3
     <input type="radio" name="education_code" value="4" /> 48900.4
     <input type="radio" name="education_code" value="5" /> 48900.7(a)
   </div>
</div>

<div class="form-group sub_education_code" style="display:none;">
  <label class="col-md-3 control-label" for="" > Education Code - Sub division: <em>*</em></label><span href="#" class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="right" title="Officer's information">  </span></h4>
   <div class="col-md-6">
     <select class="form-control" name="sub_education_code">
       <option value="1"> code 1</option>
       <option value="2">  code 2</option>
       <option value="3">  code 3</option>
     </select>
   </div>
</div>
<input type="submit" value="Next" class="btn btn-primary pull-right reason_for_stop_submit">


<% end %>

</div>


<script type="text/javascript">
  $(function(){

    $.validator.addMethod("valueNotEquals", function(value, element, arg){
      return arg !== value;
    },  "Please select a value");

    $("#reason_for_stop_form").validate({
        rules: {
            reason_for_stop_explaination: { required: true},
            select_reason_for_stop: {
              valueNotEquals: "0"
            }
        },
        messages: {
            input: { required: "required" }
        },
        ignore:      "",
        errorClass:  'fieldError',
        onkeyup:     false,
        onblur:      false,
        errorElement:'label',
        submitHandler: function(form) {
              $.rails.handleRemote( $(form) );
        }
    });

    $(".reason_for_stop_submit").on("click", function(e) {
      //alert();
      if(!$("input:radio[name='response_to_call_service']").is(":checked")) {
        $('#response-call-error').show();
      }
      else{
        $('#response-call-error').hide();
      }
      if($('.select_reason_for_stop').val() == 'suspicion_criminal_activity') {

      }
      if($('.select_reason_for_stop').val() == 'violation') {
        //alert();
        if($('.type_of_traffic_violation').val() == '0'){
          $('#traffic-error').show();
        }
      }
      $("#reason_for_stop_form").submit();
      return false;
    });
});




  $(document).ready(function(){
    $('.type_traffic_violation').hide();
    $('.violation_types').hide();
    $('.suspicion_cjis_offense_code').hide();
    $('.suspicion_cjis_offense_code_vioaltion').hide();
    $('.filter_by_code_section').hide();
    $('.filter_by_code_section_violation').hide();
    $('.suspicion_cjis_offense_code_vio').hide();
    $(".penal_code").prop("checked", true);
    $(".filter_by_code_violation").prop("checked", true);
  });

  $('.select_reason_for_stop').on('change',function(){
    //alert("1");
    if($('.select_reason_for_stop').val() == '2') {
      //alert("2");
        $('.violation_types').show();
      $('.suspicion_cjis_offense_code').show();
      $('.filter_by_code_section').show();
      //$('.filter_by_code_section_violation').show();
    }
    else{
      $('.suspicion_cjis_offense_code').hide();
        $('.violation_types').hide();
        $('.filter_by_code_section').hide();
        //$('.filter_by_code_section_violation').hide();
    }
    if($('.select_reason_for_stop').val() == '7') {
      $(".education_code").show();
      $('.sub_education_code').show();
    }
    else {
      $(".education_code").hide();
      $('.sub_education_code').hide();
    }

    if($('.select_reason_for_stop').val() == '1') {
      $('.type_traffic_violation').show();
      $('.suspicion_cjis_offense_code_vioaltion').show();
      //$('.filter_by_code_section').show();
      $('.filter_by_code_section_violation').show();
      $('.suspicion_cjis_offense_code_vio').show();

    }
    else{
      $('.type_traffic_violation').hide();
      $('.suspicion_cjis_offense_code_vioaltion').hide();
      //$('.filter_by_code_section').hide();
      $('.filter_by_code_section_violation').hide();
      $('.suspicion_cjis_offense_code_vio').hide();
    }
  });


</script>
